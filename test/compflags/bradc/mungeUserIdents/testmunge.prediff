#!/usr/bin/env python

import sys, os, shutil

expectedGenCodeFile = sys.argv[1]+'.expectedGenCode'
genCodeDir = 'genCode'
actualGenCodeFile = os.path.join(genCodeDir, sys.argv[1]+'.c')
testOutputFile = sys.argv[2]

searchString = "thisNameProbablyWontConflictWithOthers"

if (testOutputFile.find("1") != -1):
    searchString += "_chpl"
searchString += " "

count = 0

for line in open(actualGenCodeFile):
    if searchString in line:
        count += 1

with open (testOutputFile, 'a') as f:
    if (count > 0):
        f.write('Found match(es)\n')
    else:
        f.write('Didn\'t find matches against "{0}"'.format(searchString))

shutil.rmtree(genCodeDir)
